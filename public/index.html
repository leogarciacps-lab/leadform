<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Free Estimate</title>

<link href="https://netdna.bootstrapcdn.com/bootstrap/3.0.0/css/bootstrap.min.css" rel="stylesheet" />
<script src="https://code.jquery.com/jquery-1.10.1.min.js"></script>

<style>
body {
    background: #eef3f9;
    font-family: "Segoe UI", Tahoma, sans-serif;
    padding: 40px;
}

.container {
    max-width: 560px;
    background: #ffffff;
    padding: 35px;
    border-radius: 10px;
    box-shadow: 0 15px 30px rgba(0,0,0,.12);
    border-top: 6px solid #1f6fd2;
}

h2 {
    text-align: center;
    color: #1f6fd2;
    font-weight: 700;
    margin-bottom: 25px;
}

input {
    width: 100%;
    padding: 12px;
    margin-bottom: 14px;
    border-radius: 6px;
    border: 1px solid #ccc;
}

input:focus {
    border-color: #1f6fd2;
    outline: none;
}

#consentText {
    background: #f7f9fc;
    border: 1px solid #d9e1ee;
    padding: 12px;
    border-radius: 6px;
    font-size: 13px;
    margin-bottom: 10px;
}

.checkbox {
    margin: 15px 0;
}

button {
    width: 100%;
    background: #1f6fd2;
    color: white;
    border: none;
    padding: 14px;
    border-radius: 6px;
    font-weight: 700;
    font-size: 16px;
}

button:disabled {
    background: #a8c2ea;
}
</style>
</head>

<body>

<div class="container">
<h2>Get Your Free Estimate</h2>

<form id="leadForm">

    <!-- Hidden TCPA fields -->
    <input type="hidden" id="consentTextIPAddress" name="IPAddress">
    <input type="hidden" id="ConsentGiven" name="ConsentGiven" value="No">
    <input type="hidden" id="consentTextInput" name="consentText">

    <!-- Lead fields -->
    <input type="text" name="firstName" placeholder="First Name" required>
    <input type="text" name="lastName" placeholder="Last Name" required>
    <input type="email" name="email" placeholder="Email Address" required>
    <input type="text" name="phone" placeholder="Phone Number">
    <input type="text" name="zip" placeholder="ZIP Code">

    <!-- Consent text -->
    <div id="consentText">Loading consent textâ€¦</div>

    <!-- Checkbox -->
    <div class="checkbox">
        <label>
            <input type="checkbox" id="consentCheckbox" required>
            I agree to the terms above and consent to be contacted.
        </label>
    </div>

    <button type="submit" id="submitBtn" disabled>Submit</button>
</form>
</div>

<!-- LeadExec Consent Provider -->
<script type="text/javascript">
const consentKey = '8e576c04-0a0e-406a-934a-774961b4a373';
const consentTextAppendMode = 'default';
const consentTextLoadOnPageLoad = true;
const consentTextElementName = 'consentText';
const consentTextIPElementName = 'consentTextIPAddress';

(function () {
    var s = document.createElement('script');
    s.type = 'text/javascript';
    s.async = true;
    s.src =
        (location.protocol === 'https:' ? 'https://' : 'http://') +
        'consentprovider.leadexec.net/scripts/requestJS.min.js';
    document.getElementsByTagName('script')[0].parentNode.insertBefore(s, null);
})();
</script>

<script>
const checkbox = document.getElementById('consentCheckbox');
const submitBtn = document.getElementById('submitBtn');

checkbox.addEventListener('change', () => {
    submitBtn.disabled = !checkbox.checked;
});

$('#leadForm').on('submit', function (e) {
    e.preventDefault();

    $('#ConsentGiven').val('Yes');
    $('#consentTextInput').val($('#consentText').text());

    $.post('/submit-form', $(this).serialize())
        .done(() => alert('Lead submitted successfully'))
        .fail(err => alert(err.responseText));
});
</script>

</body>
</html>
